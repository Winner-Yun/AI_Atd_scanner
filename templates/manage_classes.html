<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Class Manager</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=JetBrains+Mono:wght@400&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #00f2ff;
        --bg-dark: #0f172a;
        --glass-bg: rgba(30, 41, 59, 0.7);
      }
      body {
        background: var(--bg-dark);
        color: #fff;
        font-family: "Rajdhani";
      }
      .glass-card {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
      }
      .form-control-tech {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid #475569;
        color: white;
      }
      .form-control-tech::placeholder {
        color: rgba(255, 255, 255, 0.5);
        opacity: 1;
      }
      .form-control-tech:focus {
        background: rgba(0, 0, 0, 0.5);
        border-color: var(--primary);
        color: white;
      }
      .btn-tech {
        border: 1px solid var(--primary);
        color: var(--primary);
      }
      .btn-tech:hover {
        background: var(--primary);
        color: black;
      }
    </style>
  </head>
  <body class="p-5">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-5">
        <h2 class="m-0 fw-bold">
          <span class="text-primary">///</span> CLASS MANAGER
        </h2>
        <a
          href="{{ url_for('main.index') }}"
          class="btn btn-outline-light btn-sm rounded-pill px-4"
        >
          <i class="fa-solid fa-arrow-left me-2"></i> DASHBOARD
        </a>
      </div>

      <div
        class="glass-card p-4 mb-5"
        style="border-left: 4px solid var(--primary)"
      >
        <form
          action="{{ url_for('main.create_class') }}"
          method="POST"
          class="row g-3 align-items-center"
        >
          <div class="col-auto">
            <label class="col-form-label fw-bold">CREATE GROUP:</label>
          </div>
          <div class="col">
            <input
              type="text"
              name="class_id"
              class="form-control form-control-tech"
              placeholder="e.g. Grade 12-A"
              required
            />
          </div>
          <div class="col-auto">
            <button type="submit" class="btn btn-tech px-4">ADD</button>
          </div>
        </form>
      </div>

      <div class="row g-4">
        {% for c_id, data in classes.items() %}
        <div class="col-md-4">
          <div class="glass-card h-100 p-0 overflow-hidden d-flex flex-column">
            <div
              class="p-3 bg-black bg-opacity-25 border-bottom border-white border-opacity-10 d-flex justify-content-between align-items-center"
            >
              <h4 class="m-0 fw-bold text-white">{{ c_id }}</h4>
              <a
                href="{{ url_for('main.delete_class_route', class_id=c_id) }}"
                class="text-danger hover-opacity-100"
                onclick="return confirm('Delete?')"
                ><i class="fa-solid fa-trash"></i
              ></a>
            </div>
            <div class="p-3 flex-grow-1">
              <div
                class="d-flex justify-content-between text-white-50 mb-3 small font-monospace"
              >
                <span
                  ><i class="fa-solid fa-users text-info"></i> {{
                  data.students|length }} Students</span
                >
                <span
                  ><i class="fa-solid fa-clock text-warning"></i> {{
                  data.subjects|length }} Schedules</span
                >
              </div>
              <ul class="list-unstyled small m-0 text-light opacity-75">
                {% for subj in data.subjects[:3] %}
                <li
                  class="mb-1 border-bottom border-white border-opacity-10 pb-1"
                >
                  <span class="text-info">{{ subj.subject }}</span>
                  <span>({{ subj.teacher }})</span>
                </li>
                {% else %}
                <li class="text-muted fst-italic">No schedules set.</li>
                {% endfor %}
              </ul>
            </div>
            <a
              href="{{ url_for('main.edit_class', class_id=c_id) }}"
              class="btn btn-sm btn-dark w-100 rounded-0 py-2 text-warning"
            >
              <i class="fa-solid fa-gear me-1"></i> CONFIGURE
            </a>
          </div>
        </div>
        {% else %}
        <div class="col-12 text-center text-muted py-5">
          <h4>No classes found.</h4>
        </div>
        {% endfor %}
      </div>
    </div>
  </body>
</html>
